# jizhangpro

一个记账（顾名思义，记录每天的进账出账）的网站后端，语言为 Java，使用 SpringBoot + mybatis-plus 开发。

是 23 年数据库设计大赛的作品，后端作者：[@llllll6667](https://github.com/llllll6667)，前端作者：[@hzx0901](https://github.com/hzx0901)

基于第一版的基础上做了些许修改，以应付软院实训。

## 提供的功能

### 用户模块

- 注册（用户名、密码、邮箱）
- 登录（使用 JWT
  - 密码
  - 邮箱
- 修改信息（用户名不能修改
- 获取信息

## 收入支出模块

### 收入

- 新建收入信息
- 获取全部收入信息
- 获取今日收入信息
- 获取本周收入信息
- 获取本月收入信息

### 支出

- 新建支出信息
- 获取全部支出信息
- 获取今日支出信息
- 获取本周支出信息
- 获取本月支出信息

### 期望模块

解释：这个或许可以称为是预算模块，也就是可以设置你的预算值

- 设置预算
- 更改预算
- 获取预算信息

### 其他

#### 标签

- 获取收入标签
- 获取支出标签

## 修改指南

- 本项目接口并没有使用 RESTful API 的风格。
- 在运行前，修改 application.yml 里的配置。

- 如果你需要修改某一个接口的逻辑，可以按照 controller -> service -> impl 去寻找实现逻辑。
- 如果需要更改或添加 dao 中各实体的方法，可以在 `resources/mapper` 中找到你需要的答案。

- entity 包是实体类的属性，dao 包则是操作数据库的东西，dto 包为数据约束及返回模板。

## 勉强算得上是亮点的部分

### JWT

登录鉴权方式是 JWT（Json Web Token），具体实现可见 component，config，和 utils。

对于鉴权，我在这个项目中加入了一个请求拦截器，拦截除了登陆注册操作外的所有接口，判断它们是否带有 token。

在鉴权成功之后，会拿出 token 中的负载信息，存到 ThreadLocal 中，实现类似于上下文的东西。

### cron

并不能确定它是否能够成功跑起来并执行任务，介绍就完了。

会启动一个 cron 任务，定时去查找那些超出预算的用户。然后给对方发送邮箱，告知今日预算超标。

（其实我觉得这个设计会稍微优点不合理，因为这个支出和收入全由用户去添加，那么其实在添加的时候进行提示，可能会更好？亦或者说有个定时添加记录的功能，也会更好一点）

### Redis

有一个邮箱验证码登录，将验证码存在 Redis 中，感觉这其实也算是挺亮的。毕竟学校没教 Redis。

